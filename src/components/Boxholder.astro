---
import Box from "./Box.astro";
---

<div
  class="grid relative lg:grid-cols-3 grid-cols-1 text-white lg:py-20 py-12 gap-6 px-5 lg:px-10"
>
  <div data-animate-box class="size-px absolute top-[16vh] lg:top-32"></div>
  <Box
    id="box-1"
    desc="Extract data from the content the world is watching and playing at massive scale using proprietary AI models."
    img="/images/boximage1.svg"
  />
  <Box
    id="box-2"
    desc="Trigger actions in your apps and experiences based on real time events detected in content."
    img="/images/boximage2.svg"
  />
  <Box
    id="box-3"
    desc="Replace legacy programmatic analytics with AI Agents trained by non-technical users."
    img="/images/boximage3.svg"
  />
</div>

<script>
  import { animate, inView, stagger } from "motion";

  const mql = window.matchMedia("(width <= 640px)");

  if (mql.matches) {
    inView("[data-animate-box]", () => {
      animate(
        "#box-1",
        { opacity: [0, 1], scale: [0.7, 1] },
        { duration: 1.5, type: "spring", bounce: 0.1 },
      );
    });

    inView("#box-2", (element) => {
      animate(
        element,
        { opacity: [0, 1], scale: [0.7, 1] },
        { duration: 1.5, type: "spring", bounce: 0.1, delay: 0.1 },
      );
    });

    inView("#box-3", (element) => {
      animate(
        element,
        { opacity: [0, 1], scale: [0.7, 1] },
        { duration: 1.5, type: "spring", bounce: 0.1, delay: 0.1 },
      );
    });
  } else {
    inView("[data-animate-box]", () => {
      animate(
        "[data-box]",
        { opacity: [0, 1], scale: [0.7, 1] },
        { duration: 1.5, type: "spring", bounce: 0.1, delay: stagger(0.2) },
      );
    });
  }
</script>
